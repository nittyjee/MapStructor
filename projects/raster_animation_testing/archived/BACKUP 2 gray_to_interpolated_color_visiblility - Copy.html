<!DOCTYPE html>
<html>
<head>
    <title>Grayscale to Color Mapping with Slider</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #sliderContainer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #f0f0f0;
            padding: 10px 0;
        }
        #visibilitySlider {
            width: 100%;
            height: 50px;
            -webkit-appearance: none;
        }
        #visibilitySlider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 30px;
            height: 50px;
            background: #4CAF50;
            cursor: pointer;
        }
        #visibilitySlider::-moz-range-thumb {
            width: 30px;
            height: 50px;
            background: #4CAF50;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="colorCanvas" width="500" height="500"></canvas>
    <div id="sliderContainer">
        <input type="range" id="visibilitySlider" min="0" max="255" value="255">
        <div>
            <span>Num: <span id="num"></span></span>
            <br>
            <span>Grayscale: <span id="grayValue">255</span></span>
            <br>
            <span>Min Val: <span id="minVal"></span></span>
            <br>
            <span>Max Val: <span id="maxVal"></span></span>
            <br>
            <span>Val: <span id="val"></span></span>
            <br>
            <span>Val * 28: <span id="valMult28"></span></span>
            <br>
            <span>Cumulative Val * 28: <span id="cumValMult28"></span></span>
            <br>
            <span>Percentage Val: <span id="pctVal"></span></span>
            <br>
            <span>Cumulative Percentage Val: <span id="cumPctVal"></span></span>
            <br>
            <span>Square Kilometers: <span id="sqKm"></span></span>
            <br>
            <span>Percentage of Land: <span id="pctLand"></span></span>
            <br>
            <span>Cumulative Percentage of Land: <span id="cumPctLand"></span></span>
        </div>
        
        
    </div>    
    <script>
// Define the custom values for specific slider positions
const positionValues = {};

const csvData = `
1,254,,,,,,,,,,
2,253,,,,,,,,,,
3,252,,,,,,,,,,
4,251,,,,,,,,,,
5,250,,,,,,,,,,
6,249,,,,,,,,,,
7,248,,,,,,,,,,
8,247,,,,,,,,,,
9,246,,,,,,,,,,
10,245,,,,,,,,,,
11,244,,,,,,,,,,
12,243,,,,,,,,,,
13,242,,,,,,,,,,
14,241,,,,,,,,,,
15,240,,,,,,,,,,
16,239,,,,,,,,,,
17,238,,,,,,,,,,
18,237,,,,,,,,,,
19,236,,,,,,,,,,
20,235,,,,,,,,,,
21,234,,,,,,,,,,
22,233,,,,,,,,,,
23,232,,,,,,,,,,
24,231,,,,,,,,,,
25,230,,,,,,,,,,
26,229,,,,,,,,,,
27,228,,,,,,,,,,
28,227,,,,,,,,,,
29,226,,,,,,,,,,
30,225,,,,,,,,,,
31,224,,,,,,,,,,
32,223,,,,,,,,,,
33,222,,,,,,,,,,
34,221,,,,,,,,,,
35,220,,,,,,,,,,
36,219,,,,,,,,,,
37,218,,,,,,,,,,
38,217,,,,,,,,,,
39,216,,,,,,,,,,
40,215,,,,,,,,,,
41,214,,,,,,,,,,
42,213,,,,,,,,,,
43,212,,,,,,,,,,
44,211,,,,,,,,,,
45,210,,,,,,,,,,
46,209,,,,,,,,,,
47,208,,,,,,,,,,
48,207,,,,,,,,,,
49,206,,,,,,,,,,
50,205,,,,,,,,,,
51,204,,,,,,,,,,
52,203,,,,,,,,,,
53,202,,,,,,,,,,
54,201,,,,,,,,,,
55,200,,,,,,,,,,
56,199,,,,,,,,,,
57,198,,,,,,,,,,
58,197,,,,,,,,,,
59,196,,,,,,,,,,
60,195,,,,,,,,,,
61,194,,,,,,,,,,
62,193,,,,,,,,,,
63,192,,,,,,,,,,
64,191,,,,,,,,,,
65,190,,,,,,,,,,
66,189,,,,,,,,,,
67,188,,,,,,,,,,
68,187,,,,,,,,,,
69,186,,,,,,,,,,
70,185,,,,,,,,,,
71,184,,,,,,,,,,
72,183,,,,,,,,,,
73,182,,,,,,,,,,
74,181,,,,,,,,,,
75,180,,,,,,,,,,
76,179,,,,,,,,,,
77,178,,,,,,,,,,
78,177,,,,,,,,,,
79,176,,,,,,,,,,
80,175,,,,,,,,,,
81,174,,,,,,,,,,
82,173,,,,,,,,,,
83,172,,,,,,,,,,
84,171,,,,,,,,,,
85,170,,,,,,,,,,
86,169,,,,,,,,,,
87,168,,,,,,,,,,
88,167,,,,,,,,,,
89,166,,,,,,,,,,
90,165,,,,,,,,,,
91,164,,,,,,,,,,
92,163,,,,,,,,,,
93,162,,,,,,,,,,
94,161,,,,,,,,,,
95,160,,,,,,,,,,
96,159,,,,,,,,,,
97,158,,,,,,,,,,
98,157,,,,,,,,,,
99,156,,,,,,,,,,
100,155,,,,,,,,,,
101,154,,,,,,,,,,
102,153,,,,,,,,,,
103,152,,,,,,,,,,
104,151,,,,,,,,,,
105,150,,,,,,,,,,
106,149,,,,,,,,,,
107,148,,,,,,,,,,
108,147,1,303,"$41,958,148","$1,174,828,144","$1,174,828,144",0.01%,0.01%,"5,673,506",0.71%,0.71%
109,146,304,487,"$100,866,432","$2,824,260,096","$3,999,088,240",0.01%,0.02%,"56,808",0.73%,1.43%
110,145,488,597,"$129,383,544","$3,622,739,232","$7,621,827,472",0.02%,0.03%,"54,564",0.70%,2.13%
111,144,598,676,"$128,539,984","$3,599,119,552","$11,220,947,024",0.02%,0.05%,"46,391",0.59%,2.73%
112,143,677,756,"$155,591,504","$4,356,562,112","$15,577,509,136",0.02%,0.07%,"50,015",0.64%,3.37%
113,142,757,841,"$189,043,264","$5,293,211,392","$20,870,720,528",0.02%,0.09%,"54,521",0.70%,4.07%
114,141,842,930,"$210,862,512","$5,904,150,336","$26,774,870,864",0.03%,0.12%,"54,853",0.70%,4.77%
115,140,931,1020,"$226,794,976","$6,350,259,328","$33,125,130,192",0.03%,0.14%,"53,533",0.69%,5.46%
116,139,1021,1109,"$246,697,248","$6,907,522,944","$40,032,653,136",0.03%,0.17%,"53,393",0.68%,6.14%
117,138,1110,1209,"$299,000,576","$8,372,016,128","$48,404,669,264",0.04%,0.21%,"59,416",0.76%,6.91%
118,137,1210,1288,"$279,690,752","$7,831,341,056","$56,236,010,320",0.03%,0.24%,"51,598",0.66%,7.57%
119,136,1289,1368,"$309,197,504","$8,657,530,112","$64,893,540,432",0.04%,0.28%,"53,627",0.69%,8.26%
120,135,1369,1438,"$324,848,512","$9,095,758,336","$73,989,298,768",0.04%,0.32%,"53,386",0.68%,8.94%
121,134,1439,1502,"$308,785,664","$8,645,998,592","$82,635,297,360",0.04%,0.36%,"48,373",0.62%,9.56%
122,133,1503,1577,"$376,125,504","$10,531,514,112","$93,166,811,472",0.05%,0.40%,"56,257",0.72%,10.28%
123,132,1578,1646,"$372,047,008","$10,417,316,224","$103,584,127,696",0.05%,0.45%,"53,168",0.68%,10.96%
124,131,1647,1711,"$377,390,144","$10,566,924,032","$114,151,051,728",0.05%,0.49%,"51,771",0.66%,11.63%
125,130,1712,1781,"$437,937,664","$12,262,254,592","$126,413,306,320",0.05%,0.55%,"57,757",0.74%,12.37%
126,129,1782,1840,"$390,719,392","$10,940,142,976","$137,353,449,296",0.05%,0.60%,"49,716",0.64%,13.01%
127,128,1841,1900,"$447,225,824","$12,522,323,072","$149,875,772,368",0.05%,0.65%,"55,074",0.71%,13.71%
128,127,1901,1950,"$447,434,720","$12,528,172,160","$162,403,944,528",0.05%,0.70%,"53,525",0.69%,14.40%
129,126,1951,2010,"$463,376,896","$12,974,553,088","$175,378,497,616",0.06%,0.76%,"53,901",0.69%,15.09%
130,125,2011,2064,"$434,107,616","$12,155,013,248","$187,533,510,864",0.05%,0.81%,"49,086",0.63%,15.72%
131,124,2065,2114,"$441,703,104","$12,367,686,912","$199,901,197,776",0.05%,0.87%,"48,701",0.62%,16.35%
132,123,2115,2174,"$505,543,456","$14,155,216,768","$214,056,414,544",0.06%,0.93%,"54,314",0.70%,17.04%
133,122,2175,2228,"$477,928,896","$13,382,009,088","$227,438,423,632",0.06%,0.99%,"50,011",0.64%,17.68%
134,121,2229,2283,"$501,735,520","$14,048,594,560","$241,487,018,192",0.06%,1.05%,"51,237",0.66%,18.34%
135,120,2284,2343,"$540,235,584","$15,126,596,352","$256,613,614,544",0.07%,1.11%,"53,806",0.69%,19.03%
136,119,2344,2402,"$568,388,416","$15,914,875,648","$272,528,490,192",0.07%,1.18%,"55,180",0.71%,19.74%
137,118,2403,2462,"$574,109,440","$16,075,064,320","$288,603,554,512",0.07%,1.25%,"54,376",0.70%,20.44%
138,117,2463,2522,"$596,324,544","$16,697,087,232","$305,300,641,744",0.07%,1.32%,"55,119",0.71%,21.14%
139,116,2523,2582,"$598,920,256","$16,769,767,168","$322,070,408,912",0.07%,1.40%,"54,066",0.69%,21.84%
140,115,2583,2641,"$601,961,856","$16,854,931,968","$338,925,340,880",0.07%,1.47%,"53,100",0.68%,22.52%
141,114,2642,2701,"$625,473,088","$17,513,246,464","$356,438,587,344",0.08%,1.54%,"53,936",0.69%,23.21%
142,113,2702,2766,"$670,252,416","$18,767,067,648","$375,205,654,992",0.08%,1.63%,"56,481",0.72%,23.93%
143,112,2767,2825,"$635,728,000","$17,800,384,000","$393,006,038,992",0.08%,1.70%,"52,385",0.67%,24.60%
144,111,2826,2885,"$660,143,360","$18,484,014,080","$411,490,053,072",0.08%,1.78%,"53,264",0.68%,25.29%
145,110,2886,2945,"$667,771,648","$18,697,606,144","$430,187,659,216",0.08%,1.86%,"52,777",0.68%,25.96%
146,109,2946,3004,"$669,549,696","$18,747,391,488","$448,935,050,704",0.08%,1.94%,"51,852",0.67%,26.63%
147,108,3005,3064,"$688,149,568","$19,268,187,904","$468,203,238,608",0.08%,2.03%,"52,250",0.67%,27.30%
148,107,3065,3129,"$757,661,056","$21,214,509,568","$489,417,748,176",0.09%,2.12%,"56,363",0.72%,28.02%
149,106,3130,3188,"$702,288,640","$19,664,081,920","$509,081,830,096",0.09%,2.21%,"51,217",0.66%,28.68%
150,105,3189,3253,"$765,163,392","$21,424,574,976","$530,506,405,072",0.09%,2.30%,"54,736",0.70%,29.38%
151,104,3254,3313,"$722,566,592","$20,231,864,576","$550,738,269,648",0.09%,2.39%,"50,702",0.65%,30.03%
152,103,3314,3377,"$773,680,768","$21,663,061,504","$572,401,331,152",0.09%,2.48%,"53,279",0.68%,30.72%
153,102,3378,3437,"$810,315,392","$22,688,830,976","$595,090,162,128",0.10%,2.58%,"54,821",0.70%,31.42%
154,101,3438,3497,"$764,023,808","$21,392,666,624","$616,482,828,752",0.09%,2.67%,"50,768",0.65%,32.07%
155,100,3498,3556,"$864,026,496","$24,192,741,888","$640,675,570,640",0.10%,2.78%,"56,434",0.72%,32.79%
156,99,3557,3611,"$880,891,136","$24,664,951,808","$665,340,522,448",0.11%,2.88%,"56,649",0.73%,33.52%
157,98,3612,3676,"$867,522,368","$24,290,626,304","$689,631,148,752",0.11%,2.99%,"54,855",0.70%,34.22%
158,97,3677,3741,"$837,640,064","$23,453,921,792","$713,085,070,544",0.10%,3.09%,"52,035",0.67%,34.89%
159,96,3742,3805,"$829,755,072","$23,233,142,016","$736,318,212,560",0.10%,3.19%,"50,661",0.65%,35.54%
160,95,3806,3875,"$929,163,776","$26,016,585,728","$762,334,798,288",0.11%,3.30%,"55,743",0.71%,36.26%
161,94,3876,3944,"$915,686,080","$25,639,210,240","$787,974,008,528",0.11%,3.41%,"53,954",0.69%,36.95%
162,93,3945,4009,"$863,212,928","$24,169,961,984","$812,143,970,512",0.10%,3.52%,"50,008",0.64%,37.59%
163,92,4010,4074,"$901,635,328","$25,245,789,184","$837,389,759,696",0.11%,3.63%,"51,403",0.66%,38.25%
164,91,4075,4148,"$991,424,320","$27,759,880,960","$865,149,640,656",0.12%,3.75%,"55,557",0.71%,38.96%
165,90,4149,4218,"$947,037,056","$26,517,037,568","$891,666,678,224",0.11%,3.86%,"52,159",0.67%,39.63%
166,89,4219,4268,"$896,620,480","$25,105,373,440","$916,772,051,664",0.11%,3.97%,"48,662",0.62%,40.25%
167,88,4269,4342,"$1,013,143,424","$28,368,015,872","$945,140,067,536",0.12%,4.09%,"54,221",0.70%,40.95%
168,87,4343,4412,"$986,064,576","$27,609,808,128","$972,749,875,664",0.12%,4.21%,"51,903",0.67%,41.61%
169,86,4413,4487,"$1,019,303,680","$28,540,503,040","$1,001,290,378,704",0.12%,4.34%,"52,781",0.68%,42.29%
170,85,4488,4566,"$1,075,506,944","$30,114,194,432","$1,031,404,573,136",0.13%,4.47%,"54,740",0.70%,42.99%
171,84,4567,4641,"$1,044,905,088","$29,257,342,464","$1,060,661,915,600",0.13%,4.60%,"52,296",0.67%,43.66%
172,83,4642,4715,"$1,069,240,832","$29,938,743,296","$1,090,600,658,896",0.13%,4.72%,"52,665",0.68%,44.34%
173,82,4716,4790,"$1,073,412,992","$30,055,563,776","$1,120,656,222,672",0.13%,4.86%,"52,031",0.67%,45.01%
174,81,4791,4870,"$1,116,429,568","$31,260,027,904","$1,151,916,250,576",0.14%,4.99%,"53,244",0.68%,45.69%
175,80,4871,4949,"$1,116,497,664","$31,261,934,592","$1,183,178,185,168",0.14%,5.13%,"52,391",0.67%,46.36%
176,79,4950,5034,"$1,166,793,472","$32,670,217,216","$1,215,848,402,384",0.14%,5.27%,"53,851",0.69%,47.05%
177,78,5035,5123,"$1,201,099,008","$33,630,772,224","$1,249,479,174,608",0.15%,5.41%,"54,488",0.70%,47.75%
178,77,5124,5213,"$1,227,460,736","$34,368,900,608","$1,283,848,075,216",0.15%,5.56%,"54,724",0.70%,48.45%
179,76,5214,5297,"$1,219,414,656","$34,143,610,368","$1,317,991,685,584",0.15%,5.71%,"53,465",0.69%,49.14%
180,75,5298,5377,"$1,140,539,520","$31,935,106,560","$1,349,926,792,144",0.14%,5.85%,"49,229",0.63%,49.77%
181,74,5378,5467,"$1,259,313,280","$35,260,771,840","$1,385,187,563,984",0.15%,6.00%,"53,521",0.69%,50.46%
182,73,5468,5556,"$1,234,688,512","$34,571,278,336","$1,419,758,842,320",0.15%,6.15%,"51,613",0.66%,51.12%
183,72,5557,5646,"$1,263,930,496","$35,390,053,888","$1,455,148,896,208",0.15%,6.30%,"51,992",0.67%,51.79%
184,71,5647,5745,"$1,390,337,664","$38,929,454,592","$1,494,078,350,800",0.17%,6.47%,"56,249",0.72%,52.51%
185,70,5746,5840,"$1,314,416,384","$36,803,658,752","$1,530,882,009,552",0.16%,6.63%,"52,276",0.67%,53.18%
186,69,5841,5944,"$1,435,486,976","$40,193,635,328","$1,571,075,644,880",0.17%,6.81%,"56,130",0.72%,53.90%
187,68,5945,6044,"$1,354,694,016","$37,931,432,448","$1,609,007,077,328",0.16%,6.97%,"52,072",0.67%,54.57%
188,67,6045,6143,"$1,367,125,376","$38,279,510,528","$1,647,286,587,856",0.17%,7.14%,"51,694",0.66%,55.23%
189,66,6144,6237,"$1,394,629,120","$39,049,615,360","$1,686,336,203,216",0.17%,7.31%,"51,887",0.67%,55.89%
190,65,6238,6352,"$1,628,757,120","$45,605,199,360","$1,731,941,402,576",0.20%,7.50%,"59,642",0.76%,56.66%
191,64,6353,6456,"$1,433,378,048","$40,134,585,344","$1,772,075,987,920",0.17%,7.68%,"51,569",0.66%,57.32%
192,63,6457,6561,"$1,419,063,680","$39,733,783,040","$1,811,809,770,960",0.17%,7.85%,"50,240",0.64%,57.96%
193,62,6562,6675,"$1,512,558,336","$42,351,633,408","$1,854,161,404,368",0.18%,8.03%,"52,657",0.68%,58.64%
194,61,6676,6790,"$1,517,146,496","$42,480,101,888","$1,896,641,506,256",0.18%,8.22%,"51,919",0.67%,59.31%
195,60,6791,6909,"$1,532,454,272","$42,908,719,616","$1,939,550,225,872",0.19%,8.40%,"51,545",0.66%,59.97%
196,59,6910,7033,"$1,593,357,952","$44,614,022,656","$1,984,164,248,528",0.19%,8.60%,"52,659",0.68%,60.64%
197,58,7034,7158,"$1,615,490,816","$45,233,742,848","$2,029,397,991,376",0.20%,8.79%,"52,459",0.67%,61.31%
198,57,7159,7287,"$1,682,923,008","$47,121,844,224","$2,076,519,835,600",0.20%,9.00%,"53,683",0.69%,62.00%
199,56,7288,7426,"$1,726,060,672","$48,329,698,816","$2,124,849,534,416",0.21%,9.21%,"54,058",0.69%,62.70%
200,55,7427,7551,"$1,641,851,904","$45,971,853,312","$2,170,821,387,728",0.20%,9.40%,"50,519",0.65%,63.34%
201,54,7552,7690,"$1,834,804,096","$51,374,514,688","$2,222,195,902,416",0.22%,9.63%,"55,466",0.71%,64.06%
202,53,7691,7839,"$1,855,224,576","$51,946,288,128","$2,274,142,190,544",0.23%,9.85%,"55,054",0.71%,64.76%
203,52,7840,7988,"$1,849,572,992","$51,788,043,776","$2,325,930,234,320",0.22%,10.08%,"53,846",0.69%,65.45%
204,51,7989,8143,"$1,884,777,344","$52,773,765,632","$2,378,703,999,952",0.23%,10.31%,"53,848",0.69%,66.14%
205,50,8144,8302,"$1,934,816,512","$54,174,862,336","$2,432,878,862,288",0.23%,10.54%,"54,211",0.70%,66.84%
206,49,8303,8461,"$1,937,829,888","$54,259,236,864","$2,487,138,099,152",0.24%,10.78%,"53,275",0.68%,67.52%
207,48,8462,8640,"$2,066,407,040","$57,859,397,120","$2,544,997,496,272",0.25%,11.03%,"55,679",0.71%,68.24%
208,47,8641,8824,"$2,110,568,832","$59,095,927,296","$2,604,093,423,568",0.26%,11.28%,"55,690",0.71%,68.95%
209,46,8825,9003,"$2,017,355,520","$56,485,954,560","$2,660,579,378,128",0.24%,11.53%,"52,147",0.67%,69.62%
210,45,9004,9182,"$2,057,686,144","$57,615,212,032","$2,718,194,590,160",0.25%,11.78%,"52,152",0.67%,70.29%
211,44,9183,9376,"$2,182,143,744","$61,100,024,832","$2,779,294,614,992",0.26%,12.04%,"54,186",0.69%,70.98%
212,43,9377,9580,"$2,210,008,320","$61,880,232,960","$2,841,174,847,952",0.27%,12.31%,"53,721",0.69%,71.67%
213,42,9581,9799,"$2,343,629,824","$65,621,635,072","$2,906,796,483,024",0.28%,12.59%,"55,729",0.71%,72.39%
214,41,9800,10018,"$2,328,409,344","$65,195,461,632","$2,971,991,944,656",0.28%,12.88%,"54,138",0.69%,73.08%
215,40,10019,10207,"$2,264,210,944","$63,397,906,432","$3,035,389,851,088",0.27%,13.15%,"51,649",0.66%,73.74%
216,39,10208,10446,"$2,427,128,832","$67,959,607,296","$3,103,349,458,384",0.29%,13.45%,"54,153",0.69%,74.44%
217,38,10447,10679,"$2,421,296,384","$67,796,298,752","$3,171,145,757,136",0.29%,13.74%,"52,822",0.68%,75.12%
218,37,10680,10918,"$2,302,932,480","$64,482,109,440","$3,235,627,866,576",0.28%,14.02%,"49,138",0.63%,75.75%
219,36,10919,11177,"$2,575,043,072","$72,101,206,016","$3,307,729,072,592",0.31%,14.33%,"53,703",0.69%,76.43%
220,35,11178,11435,"$2,578,043,904","$72,185,229,312","$3,379,914,301,904",0.31%,14.64%,"52,586",0.67%,77.11%
221,34,11436,11719,"$2,583,444,480","$72,336,445,440","$3,452,250,747,344",0.31%,14.96%,"51,408",0.66%,77.77%
222,33,11720,12017,"$2,723,518,720","$76,258,524,160","$3,528,509,271,504",0.33%,15.29%,"52,896",0.68%,78.45%
223,32,12018,12351,"$2,836,789,504","$79,430,106,112","$3,607,939,377,616",0.34%,15.63%,"53,658",0.69%,79.13%
224,31,12352,12714,"$2,933,706,496","$82,143,781,888","$3,690,083,159,504",0.36%,15.99%,"53,939",0.69%,79.83%
225,30,12715,13097,"$3,028,151,040","$84,788,229,120","$3,774,871,388,624",0.37%,16.35%,"54,065",0.69%,80.52%
226,29,13098,13490,"$3,013,623,296","$84,381,452,288","$3,859,252,840,912",0.37%,16.72%,"52,250",0.67%,81.19%
227,28,13491,13917,"$3,238,844,672","$90,687,650,816","$3,949,940,491,728",0.39%,17.11%,"54,465",0.70%,81.89%
228,27,13918,14365,"$3,279,724,288","$91,832,280,064","$4,041,772,771,792",0.40%,17.51%,"53,441",0.69%,82.57%
229,26,14366,14848,"$3,347,896,832","$93,741,111,296","$4,135,513,883,088",0.41%,17.92%,"52,812",0.68%,83.25%
230,25,14849,15365,"$3,396,642,816","$95,105,998,848","$4,230,619,881,936",0.41%,18.33%,"51,805",0.66%,83.92%
231,24,15366,15937,"$3,567,100,160","$99,878,804,480","$4,330,498,686,416",0.43%,18.76%,"52,535",0.67%,84.59%
232,23,15938,16579,"$3,750,342,912","$105,009,601,536","$4,435,508,287,952",0.45%,19.22%,"53,164",0.68%,85.27%
233,22,16580,17275,"$3,807,067,904","$106,597,901,312","$4,542,106,189,264",0.46%,19.68%,"51,834",0.66%,85.94%
234,21,17276,18036,"$4,233,534,208","$118,538,957,824","$4,660,645,147,088",0.51%,20.19%,"55,311",0.71%,86.65%
235,20,18037,18892,"$4,116,424,960","$115,259,898,880","$4,775,905,045,968",0.50%,20.69%,"51,394",0.66%,87.30%
236,19,18893,19817,"$4,226,045,952","$118,329,286,656","$4,894,234,332,624",0.51%,21.20%,"50,339",0.65%,87.95%
237,18,19818,20881,"$4,601,658,368","$128,846,434,304","$5,023,080,766,928",0.56%,21.76%,"52,102",0.67%,88.62%
238,17,20882,22184,"$4,833,359,872","$135,334,076,416","$5,158,414,843,344",0.59%,22.35%,"51,754",0.66%,89.28%
239,16,22185,23647,"$5,037,518,336","$141,050,513,408","$5,299,465,356,752",0.61%,22.96%,"50,698",0.65%,89.93%
240,15,23648,25418,"$5,373,073,408","$150,446,055,424","$5,449,911,412,176",0.65%,23.61%,"50,515",0.65%,90.58%
241,14,25419,27626,"$6,056,830,976","$169,591,267,328","$5,619,502,679,504",0.73%,24.35%,"52,691",0.68%,91.26%
242,13,27627,30247,"$6,490,070,016","$181,721,960,448","$5,801,224,639,952",0.79%,25.13%,"51,756",0.66%,91.92%
243,12,30248,33615,"$7,418,195,968","$207,709,487,104","$6,008,934,127,056",0.90%,26.03%,"53,610",0.69%,92.61%
244,11,33616,37848,"$8,276,523,520","$231,742,658,560","$6,240,676,785,616",1.00%,27.04%,"53,532",0.69%,93.29%
245,10,37849,43573,"$9,487,746,048","$265,656,889,344","$6,506,333,674,960",1.15%,28.19%,"53,887",0.69%,93.99%
246,9,43574,51178,"$10,668,570,624","$298,719,977,472","$6,805,053,652,432",1.29%,29.48%,"52,097",0.67%,94.65%
247,8,51179,61873,"$12,794,688,512","$358,251,278,336","$7,163,304,930,768",1.55%,31.03%,"52,425",0.67%,95.33%
248,7,61874,77327,"$15,480,210,432","$433,445,892,096","$7,596,750,822,864",1.88%,32.91%,"51,628",0.66%,95.99%
249,6,77328,101014,"$19,933,399,040","$558,135,173,120","$8,154,885,995,984",2.42%,35.33%,"52,017",0.67%,96.66%
250,5,101015,138807,"$26,501,910,528","$742,053,494,784","$8,896,939,490,768",3.21%,38.55%,"51,592",0.66%,97.32%
251,4,138808,206310,"$38,663,421,952","$1,082,575,814,656","$9,979,515,305,424",4.69%,43.24%,"52,660",0.68%,97.99%
252,3,206311,328448,"$56,844,996,608","$1,591,659,905,024","$11,571,175,210,448",6.90%,50.13%,"50,264",0.64%,98.64%
253,2,328449,623028,"$102,134,743,040","$2,859,772,805,120","$14,430,948,015,568",12.39%,62.52%,"52,213",0.67%,99.31%
254,1,623029,12425079,"$308,955,086,848","$8,650,742,431,744","$23,081,690,447,312",37.48%,100.00%,"54,068",0.69%,100.00%
`;

csvData.split('\n').forEach(line => {
    const values = line.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/); // Split by comma not inside double quotes
    const position = values.shift(); // Remove the first value and use it as the key
    positionValues[position] = values.map(val => val.trim().replace(/"/g, '')); // Remove surrounding double quotes and trim
});

console.log(positionValues);



window.onload = function() {
    var canvas = document.getElementById('colorCanvas');
    var ctx = canvas.getContext('2d');
    var slider = document.getElementById('visibilitySlider');
    var grayValue = document.getElementById('grayValue');
    var num = document.getElementById('num');
    var minVal = document.getElementById('minVal');
    var maxVal = document.getElementById('maxVal');
    var val = document.getElementById('val');
    var valMult28 = document.getElementById('valMult28');
    var cumValMult28 = document.getElementById('cumValMult28');
    var pctVal = document.getElementById('pctVal');
    var cumPctVal = document.getElementById('cumPctVal');
    var sqKm = document.getElementById('sqKm');
    var pctLand = document.getElementById('pctLand');
    var cumPctLand = document.getElementById('cumPctLand');
    var originalImageData = null;

    // Load the grayscale image
    var img = new Image();
    img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);
        originalImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        updateCanvas(255); // Initially show all pixels
    };
    img.src = './land_value_gray.jpg'; // Replace with the path to your grayscale image

    // Define the color key points
    const colorRamp = [
        { value: 0, color: [43, 131, 186] },
        { value: 63.75, color: [171, 221, 164] },
        { value: 127.5, color: [255, 255, 191] },
        { value: 191.25, color: [253, 174, 97] },
        { value: 255, color: [215, 25, 28] }
    ];

    // Function to interpolate a color based on a grayscale value
    function grayscaleToColor(grayscale) {
        // Find the two key points the grayscale value falls between
        let startIndex = 0;
        for (let i = 1; i < colorRamp.length; i++) {
            if (grayscale < colorRamp[i].value) {
                startIndex = i - 1;
                break;
            }
        }

        const startValue = colorRamp[startIndex].value;
        const endValue = colorRamp[startIndex + 1].value;
        const position = (grayscale - startValue) / (endValue - startValue);

        const startColor = colorRamp[startIndex].color;
        const endColor = colorRamp[startIndex + 1].color;

        const r = startColor[0] + (endColor[0] - startColor[0]) * position;
        const g = startColor[1] + (endColor[1] - startColor[1]) * position;
        const b = startColor[2] + (endColor[2] - startColor[2]) * position;

        return [Math.round(r), Math.round(g), Math.round(b)];
    }

        // Function to update the canvas based on the slider value
        function updateCanvas(threshold) {
            var imageData = new ImageData(new Uint8ClampedArray(originalImageData.data), canvas.width, canvas.height);
            var data = imageData.data;

            // Map grayscale values to RGB values and apply threshold
            for (var i = 0; i < data.length; i += 4) {
                var grayscale = data[i];

                if (grayscale <= threshold) {
                    var rgb = grayscaleToColor(grayscale);
                    data[i] = rgb[0];     // Red
                    data[i + 1] = rgb[1]; // Green
                    data[i + 2] = rgb[2]; // Blue
                } else {
                    data[i + 3] = 0; // Make pixel transparent
                }
            }

            // Put the modified image data back to the canvas
            ctx.putImageData(imageData, 0, 0);
        }

        // Update the canvas and the slider value display when the slider value changes
        slider.oninput = function() {
            updateCanvas(this.value);
            grayValue.textContent = this.value;
            const values = positionValues[this.value] || [];
            num.textContent = values[0] || '';
            minVal.textContent = values[1] || '';
            maxVal.textContent = values[2] || '';
            val.textContent = values[3] || '';
            valMult28.textContent = values[4] || '';
            cumValMult28.textContent = values[5] || '';
            pctVal.textContent = values[6] || '';
            cumPctVal.textContent = values[7] || '';
            sqKm.textContent = values[8] || '';
            pctLand.textContent = values[9] || '';
            cumPctLand.textContent = values[10] || '';
        };

    };
    </script>
</body>
</html>